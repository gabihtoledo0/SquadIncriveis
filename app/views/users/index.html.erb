<head>
  <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.20/css/dataTables.bootstrap4.min.css">     


 <script type="text/javascript" charset="utf8" src="https://cdn.datatables.net/1.10.20/js/jquery.dataTables.js"></script>
 <script type="text/javacript" src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.1/jquery.min.js"></script>
<script  type="text/javacript" src="https://code.jquery.com/jquery-3.3.1.js"></script>
<script  type="text/javacript" src="https://cdn.datatables.net/buttons/1.6.1/js/dataTables.buttons.min.js"></script>
<script  type="text/javacript" src="https://cdn.datatables.net/buttons/1.6.1/js/buttons.flash.min.js"></script>
<script  type="text/javacript" src="https://cdnjs.cloudflare.com/ajax/libs/jszip/3.1.3/jszip.min.js"></script>
<script  type="text/javacript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/pdfmake.min.js"></script>
<script  type="text/javacript" src="https://cdnjs.cloudflare.com/ajax/libs/pdfmake/0.1.53/vfs_fonts.js"></script>
<script  type="text/javacript" src="https://cdn.datatables.net/buttons/1.6.1/js/buttons.html5.min.js"></script>
<script  type="text/javacript" src="https://cdn.datatables.net/buttons/1.6.1/js/buttons.print.min.js"></script> 
</head>

<h2 class="lista">Lista de Usuários</h2>
<body>
  <p class="search" align="left">
    <input class="caixa-de-texto-cad borda-caixa-texto" type="text" id="mySearchText" placeholder="Pesquise Aqui !">
  </p>
  <div class="table-responsive" id= "divTabela">
    <table class="table table-striped table-bordered borderless" id="mytable">
      <thead class="menubarra">
        <th scope="col">Nome</th>
        <th scope="col">Razao Social</th>
        <th scope="col">CPF</th>
        <th scope="col">CNPJ</th>
        <th scope="col">Email</th>
        <th scope="col">ADM</th>
      </thead>
      <tbody class="table1">
        <% @users.each do |user| %>
        <tr>
          <td><% if user.fullname.nil? %>
            -
            <% else %>
            <%= user.fullname %>
            <% end %>
          </td>
          <td><% if user.razaosocial.nil? %>
            -
            <% else %>
            <%= user.razaosocial %>
            <% end %>
          </td>
          <td><% if user.cpf.nil? %>
            -
            <% else %>
            <%= user.cpf %>
            <% end %>
          </td>
          <td><% if user.cnpj.nil? %>
            -
            <% else %>
            <%= user.cnpj %>
            <% end %>
          </td>
          <td><%= user.email %></td>
          <td><% if user.adm  %>
            ADM
            <% else %>
            Usuário
            <% end %>
          </td>
        </tr>
        <% end %>
      </tbody>
    </table>
  </div>
</body>


</br>
<%= link_to "Voltar", :ideas, :class => "op2" %>

<script type="text/javascript">
  $(document).ready(function () {
    var table = $('#mytable').DataTable({
      "dom": '<"top"i>rt<"bottom"><"clear">',
      "paging": false,
      "bInfo": false,
      "oLanguage": {
        "sEmptyTable": "Nenhum registro encontrado na tabela",
        "sZeroRecords": "Nenhum registro encontrado",
        "sSearch": "Pesquisar: "
      }
    });

    $('#mySearchText').keyup(function () {
      table.search($('#mySearchText').val()).draw();
    });

  // $("#btnExport").click(function(e) {
  // var a = document.createElement('a');
  // var data_type = 'data:application/vnd.ms-pdf';
  // var table_div = document.getElementById('divTabela');
  // var table_html = table_div.outerHTML.replace(/ /g, '%20');
  // a.href = data_type + ', ' + table_html;
  // a.download = 'filename.xls';
  // a.click();
  // e.preventDefault();
  // });

});
$(document).ready(function() {
    $('#mytable').DataTable( {
        dom: 'Bfrtip',
        buttons: [
            'copy', 'csv', 'excel', 'pdf', 'print'
        ]
    } );
} );
 
</script>